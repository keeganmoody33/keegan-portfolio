# Cursor Rules — Keegan Moody Portfolio

> For AI assistants working on this codebase
> Last updated: 2026-01-31

---

## Project Overview

This is Keegan Moody's portfolio website with AI-powered chat and JD analyzer features.

**Stack:**
- Frontend: Next.js (in `portfolio-site/`)
- Backend: Supabase (PostgreSQL + Edge Functions)
- AI: Claude API via Edge Functions
- Deployment: Vercel (auto-deploy on push to main)

---

## Database Schema (Critical)

The Edge Functions query these tables. Use the **correct column names**:

```sql
candidate_profile:
  id, first_name, last_name, email, location
  headline (NOT title)
  summary (NOT elevator_pitch, career_narrative, looking_for)
  linkedin_url, github_url, portfolio_url

experiences:
  id, candidate_id, company_name
  role_title (NOT title)
  start_date, end_date, duration_months
  public_bullets (ARRAY) — NOT bullet_points
  private_context_what_id_do_differently
  private_context_manager_would_say
  display_order

ai_instructions:
  id, candidate_id, created_at
  instruction_type, instruction, priority, content

skills:
  skill_name, category, evidence
```

**Common mistakes to avoid:**
- `profile.name` → Use `${profile.first_name} ${profile.last_name}`
- `profile.title` → Use `profile.headline`
- `exp.bullet_points` → Use `exp.public_bullets`

---

## Edge Functions

Located in `supabase/functions/`:

| Function | Purpose | Endpoint |
|----------|---------|----------|
| `chat/index.ts` | Portfolio AI chat | `/functions/v1/chat` |
| `jd-analyzer/index.ts` | Job description fit analysis | `/functions/v1/jd-analyzer` |

**Deploy command:**
```bash
supabase functions deploy chat
supabase functions deploy jd-analyzer
```

---

## AI Behavior Philosophy

The portfolio AI should:
- **Lead with value** — not confessions
- **Acknowledge gaps only when directly asked**
- **Ask questions back** to engage visitors
- **Frame growth constructively** — not self-sabotage

**Do NOT have the AI:**
- Volunteer firing history
- Use phrases like "I can't", "I'm not qualified", "drowned in autonomy"
- Lead with limitations

---

## Key Files

| File | Purpose |
|------|---------|
| `CLAUDE.md` | Full portfolio context for AI assistants |
| `ai-config/SESSION_LOG_*.md` | Session logs documenting changes |
| `ai-config/system-prompts.md` | AI chat behavior guidelines |
| `supabase/functions/*/index.ts` | Edge Function source code |

---

## Positioning Summary

**Headline:** GTM Engineer | Builder | Finds diamonds in dirt

**Looking for:**
- Founding GTM Engineer / Growth / Early Team roles
- Product-adjacent work
- Remote or Atlanta-based
- $120K floor, $150-180K target

**NOT looking for:**
- BDR/SDR roles
- Pure cold calling
- Micromanagement

---

## Git Workflow

- **Main branch:** Production (Vercel auto-deploys)
- **Feature branches:** Use for multi-file changes or experiments
- **Naming:** `fix/description` or `feature/description`

**When to branch:**
- Adding new features
- Changing how something works
- Anything you might want to undo

**Push to main directly for:**
- Small copy changes
- Quick CSS tweaks
- Obvious bug fixes

---

## Testing Checklist

After changes to Edge Functions:

1. Deploy: `supabase functions deploy <function-name>`
2. Test chat: Ask "What are you looking for in your next role?"
3. Test edge case: Ask "Why have you had short stints?"
4. Test JD analyzer: Paste a real job posting URL

---

## Session Log

**2026-01-31:** Fixed self-sabotaging AI behavior
- Updated Edge Functions to use correct database columns
- Rewrote system prompts to lead with value
- Updated public_bullets for key experiences
- See `ai-config/SESSION_LOG_2026-01-31.md` for details

---

*Cursor rules v3.0 — Lead with value, build with precision.*
